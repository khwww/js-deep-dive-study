# 42. 비동기 프로그래밍

## 42.1 동기 처리와 비동기 처리

- 실행 컨텍스트 스택은 `콜 스택` 이라고도 부른다.

- 함수의 실행 순서는 실행 컨텍스트 스택으로 관리하며 자바스크립트 엔진은 `단 하나의 실행 컨텍스트`를 가진다

즉, 한 번에 하나의 태스크만 실행할 수 있는 `싱글 스레드`방식으로 동작한다.

- 현재 실행 중인 태스크가 종료할 때까지 다음에 실행될 태스크가 대기하는 방식을 `동기 처리`라고 한다. 순서대로 진행된다는 보장이 있지만, 이후 태스크들이 `블로킹`된다는 단점도 있다.

![image](https://github.com/user-attachments/assets/34471429-eaa7-4985-b9ac-8beb9de8a7fc)


setTimeout은 비동기함수로 보는데, 그 이유는 현재 실행 중인 태스크가 종료되지 않아도 다음 태스크를 바로 실행하기 때문에 블로킹이 `발생하지 않는다.`

보통 콜백 패턴을 사용한다.

![image](https://github.com/user-attachments/assets/a9103652-fe8d-4936-9050-8c0013b3daf7)


## 42.2 이벤트 루프와 태스크 큐

- 근데 브라우저를 보면 많은 태스크가 동시에 처리되는 것처럼 느껴진다.

- 이러한 모습을 도와주는 게 `이벤트 루프`이다.

![image](https://github.com/user-attachments/assets/478a4d72-13ab-48fd-9385-c24a7b381794)


이미지처럼 콜 스택은 실행 컨텍스트 스택을 말하고,

힙은 객체가 저장되는 메모리 공간이다. 원시 값과 달리 객체는 크기가 정해져 있지 않아서 런타임에 결정한다.

- 태스크 큐 : 비동기 함수 또는 이벤트 핸들러가 일시적으로 보관되는 영역

- 이벤트 루프 : 콜 스택에 실행 컨텍스트 확인, 태스크 큐에 대기중인 함수를 반복확인 작업을 하여 콜 스택이 `비어 있고 태스크 큐에 대기 중인 함수가 있다면` 이벤트 루프는 순차적으로 태스크 큐에 대기 중인 함수를 콜 스택으로 이동시켜 비동기 처리를 진행한다

- 자바스크립트 엔진에서 싱글 스레드 방식, 브라우저는 멀티 스레드로 동작
